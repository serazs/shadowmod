local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "GHOST RING V4 | CLEAN",
   LoadingTitle = "Fizik Motoru Hazırlanıyor...",
   LoadingSubtitle = "by serazs",
   ConfigurationSaving = {
      Enabled = true,
      FolderName = "GhostRing",
      FileName = "RingConfig"
   }
})

-- DEĞİŞKENLER (HİÇBİRİ DEĞİŞMEDİ)
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local radius = 50
local height = 100
local rotationSpeed = 1
local attractionStrength = 1000
local ringPartsEnabled = false
local parts = {}

-- NETWORK OWNERSHIP BYPASS (ORİJİNAL KODUN AYNISI)
if not getgenv().Network then
    getgenv().Network = {
        BaseParts = {},
        Velocity = Vector3.new(14.46262424, 14.46262424, 14.46262424)
    }

    local function EnablePartControl()
        LocalPlayer.ReplicationFocus = workspace
        RunService.Heartbeat:Connect(function()
            sethiddenproperty(LocalPlayer, "SimulationRadius", math.huge)
            for _, Part in pairs(getgenv().Network.BaseParts) do
                if Part:IsDescendantOf(workspace) then
                    Part.Velocity = getgenv().Network.Velocity
                end
            end
        end)
    end
    EnablePartControl()
end

-- PARÇA TOPLAMA MANTIĞI (DOKUNULMADI)
local function RetainPart(Part)
    if Part:IsA("BasePart") and not Part.Anchored and Part:IsDescendantOf(workspace) then
        if Part.Parent == LocalPlayer.Character or Part:IsDescendantOf(LocalPlayer.Character) then
            return false
        end
        Part.CustomPhysicalProperties = PhysicalProperties.new(0, 0, 0, 0, 0)
        Part.CanCollide = false
        return true
    end
    return false
end

local function addPart(part)
    if RetainPart(part) then
        if not table.find(parts, part) then
            table.insert(parts, part)
            if getgenv().Network then
                table.insert(getgenv().Network.BaseParts, part)
            end
        end
    end
end

for _, part in pairs(workspace:GetDescendants()) do addPart(part) end
workspace.DescendantAdded:Connect(addPart)

-- YENİ MODERN ARAYÜZ (RAYFIELD)
local Tab = Window:CreateTab("Hortum Ayarları", 4483345998)

Tab:CreateSection("Ana Kontrol")

Tab:CreateToggle({
   Name = "Hortumu Aktif Et (Ring Parts)",
   CurrentValue = false,
   Flag = "RingToggle",
   Callback = function(Value)
      ringPartsEnabled = Value
   end,
})

Tab:CreateSlider({
   Name = "Yarıçap (Radius)",
   Min = 1,
   Max = 1000,
   Default = 50,
   Increment = 1,
   ValueName = "Mesafe",
   Callback = function(Value)
      radius = Value
   end,
})

Tab:CreateSection("İnce Ayarlar")

Tab:CreateSlider({
   Name = "Dönüş Hızı",
   Min = 1,
   Max = 50,
   Default = 1,
   Increment = 1,
   ValueName = "Hız",
   Callback = function(Value)
      rotationSpeed = Value
   end,
})

Tab:CreateSlider({
   Name = "Çekim Gücü",
   Min = 100,
   Max = 10000,
   Default = 1000,
   Increment = 100,
   ValueName = "Güç",
   Callback = function(Value)
      attractionStrength = Value
   end,
})

-- ANA FİZİK DÖNGÜSÜ (ORİJİNAL MATEMATİKSEL HESAPLAMA)
RunService.Heartbeat:Connect(function()
    if not ringPartsEnabled then return end

    local humanoidRootPart = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if humanoidRootPart then
        local tornadoCenter = humanoidRootPart.Position
        for _, part in pairs(parts) do
            if part.Parent and not part.Anchored then
                local pos = part.Position
                local distance = (Vector3.new(pos.X, tornadoCenter.Y, pos.Z) - tornadoCenter).Magnitude
                local angle = math.atan2(pos.Z - tornadoCenter.Z, pos.X - tornadoCenter.X)
                local newAngle = angle + math.rad(rotationSpeed)
                local targetPos = Vector3.new(
                    tornadoCenter.X + math.cos(newAngle) * math.min(radius, distance),
                    tornadoCenter.Y + (height * (math.abs(math.sin((pos.Y - tornadoCenter.Y) / height)))),
                    tornadoCenter.Z + math.sin(newAngle) * math.min(radius, distance)
                )
                local directionToTarget = (targetPos - part.Position).unit
                part.Velocity = directionToTarget * attractionStrength
            end
        end
    end
end)

Rayfield:Notify({Title = "Sistem Aktif", Content = "Hortum hazır kanka, keyfini çıkar!", Duration = 5})
